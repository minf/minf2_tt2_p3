<html>
  <head>
    <title>Reinforcement Blackjack</title>

    <script type="text/javascript" src="jquery-1.6.1.min.js"></script>
    <script type="text/javascript" src="tooltip.js"></script>
    <script type="text/javascript" src="cardstack.js"></script>
    <script type="text/javascript" src="blackjack.js"></script>
    <script type="text/javascript" src="player.js"></script>
    <script type="text/javascript" src="dealer.js"></script>
    <script type="text/javascript" src="game.js"></script>
    <script type="text/javascript" src="human_player.js"></script>
    <script type="text/javascript" src="montecarlo_player.js"></script>

    <link rel="stylesheet" href="blackjack.css" />
  </head>

  <body>
    <div id="page">
      <div id="dealer" class="player">
      </div>

      <div id="stack">
        <img src="images/card-stack.png" />
      </div>

      <div id="players">
      </div>
    </div>
  </body>

  <script type="text/javascript">
    $(document).ready(
      function() {
        var game = new Game();

        game.match();

        $("[title]").live("mouseover", function() {
          $(this).tooltip($(this).attr("title"));
        });

        $(".player").live("mouseout", function() {
          $.hideTooltips();
        });

        $("#stack").live("mouseover", function() {
          $(this).tooltip("Der Kartenstapel hat noch " + game.getCardstack().size() + " Karten");
        });

        $("#stack").live("mouseout", function() {
          $.hideTooltips();
        });

        $(".player").live("mouseover", function() {
          $(this).css("border-color", "#fff");
        });

        $(".player").live("mouseout", function() {
          $(this).css("border-color", "#888");
        });

        // dump and load

   			$(window).keydown(
				  function(e) {
            if(e.keyCode == 27) { // 'esc' key: hide dump
              game.unpause();

              $("textarea").hide();
            }

            if(e.keyCode == 68) { // 'd' key: dump monte carlo player
              game.pause();

              var dump = $(".monte-carlo-player")[0].player.dump();

              $("textarea")
                .show()
                .css("left", 50)
                .css("top", 50)
                .css("width", $(window).width() - 100)
                .css("height", $(window).height() - 100)
                .text(dump);
            }

            if(e.keyCode == 76) { // 'l' key: load copy/pasted dump into monte carlo player
              var dump = $("textarea").text();

              $(".monte-carlo-player")[0].player.load(dump);

              alert("loaded");
            }
          }
        );
      }
    );
  </script>

  <textarea style="display: none; position: absolute; color: #000"></textarea>
</html>
